{"version":3,"sources":["webpack:///./src/components/list/user.vue?52a5","webpack:///src/components/list/user.vue","webpack:///./src/components/list/user.vue?6330","webpack:///./src/components/list/user.vue"],"names":["render","_vm","this","_h","$createElement","_c","_self","staticClass","attrs","path","_v","staticStyle","on","Clear","model","value","callback","$$v","SerachText","expression","Serach_User","slot","DialogActive","_e","Userlist","scopedSlots","_u","key","fn","scope","row","Juri","UserActive","$event","onChange","$set","UserEdit","Remove","_id","query","pagenum","pagesize","total","handleSizeChange","handleCurrentChange","dialogVisibleAddUser","ref","Form","FormRules","trim","_l","item","id","name","label","DialogCancel","DialogAddUserName","EditDialog","EditForm","AddEditDialog","staticRenderFns","data","options","username","password","created","GetUsetlist","JSON","parse","Storage","Session","get","methods","$http","params","val","status","put","$api","API_SERVER_MODIFY_USER","then","res","$refs","FormRef","resetFields","validate","valid","$confirm","confirmButtonText","cancelButtonText","type","filter","EditFormRef","Size","Num","component"],"mappings":"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","file":"js/chunk-2d0f1565.3913e378.js","sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"container\"},[_c('el-card',[_c('el-breadcrumb',{attrs:{\"separator\":\"/\"}},[_c('el-breadcrumb-item',{attrs:{\"to\":{ path: '/home' }}},[_vm._v(\"首页\")]),_c('el-breadcrumb-item',[_vm._v(\"用户管理\")]),_c('el-breadcrumb-item',[_vm._v(\"用户列表\")])],1),(_vm.UserActive)?_c('el-row',{staticStyle:{\"margin-top\":\"15px\"},attrs:{\"gutter\":20}},[_c('el-col',{attrs:{\"span\":8}},[_c('el-input',{staticClass:\"input-with-select\",attrs:{\"placeholder\":\"请输入用户名\",\"clearable\":\"\"},on:{\"clear\":_vm.Clear},model:{value:(_vm.SerachText),callback:function ($$v) {_vm.SerachText=$$v},expression:\"SerachText\"}},[_c('el-button',{attrs:{\"slot\":\"append\",\"icon\":\"el-icon-search\"},on:{\"click\":_vm.Serach_User},slot:\"append\"})],1)],1),_c('el-col',{attrs:{\"span\":5}},[(_vm.UserActive)?_c('el-button',{attrs:{\"type\":\"primary\"},on:{\"click\":_vm.DialogActive}},[_vm._v(\"添加用户\")]):_vm._e()],1)],1):_vm._e(),_c('el-table',{attrs:{\"data\":_vm.Userlist,\"border\":\"\",\"stripe\":\"\"}},[_c('el-table-column',{attrs:{\"label\":\"用户名\",\"prop\":\"username\"}}),_c('el-table-column',{attrs:{\"label\":\"权限\"},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return [(scope.row.Juri == 'admin')?_c('el-tag',{attrs:{\"type\":\"danger\"}},[_vm._v(\"管理员\")]):_c('el-tag',{attrs:{\"type\":\"success\"}},[_vm._v(\"普通用户\")])]}}])}),_c('el-table-column',{attrs:{\"label\":\"状态\"},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return [_c('el-switch',{attrs:{\"disabled\":_vm.UserActive ? false : true,\"active-color\":\"#13ce66\",\"inactive-color\":\"#ff4949\"},on:{\"change\":function($event){return _vm.onChange(scope.row)}},model:{value:(scope.row.status),callback:function ($$v) {_vm.$set(scope.row, \"status\", $$v)},expression:\"scope.row.status\"}})]}}])}),_c('el-table-column',{attrs:{\"label\":\"操作\"},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return [_c('el-button',{attrs:{\"size\":\"mini\",\"type\":\"primary\"},on:{\"click\":function($event){return _vm.UserEdit(scope.row)}}},[_vm._v(\"编辑\")]),(_vm.UserActive)?_c('el-button',{attrs:{\"size\":\"mini\",\"type\":\"danger\"},on:{\"click\":function($event){return _vm.Remove(scope.row._id)}}},[_vm._v(\"删除\")]):_vm._e()]}}])})],1),(_vm.UserActive)?_c('el-pagination',{attrs:{\"current-page\":_vm.query.pagenum,\"page-sizes\":[5, 10, 15, 20],\"page-size\":_vm.query.pagesize,\"layout\":\"total, sizes, prev, pager, next, jumper\",\"total\":_vm.total},on:{\"size-change\":_vm.handleSizeChange,\"current-change\":_vm.handleCurrentChange}}):_vm._e()],1),_c('el-dialog',{attrs:{\"title\":\"添加用户\",\"visible\":_vm.dialogVisibleAddUser,\"width\":\"45%\"},on:{\"update:visible\":function($event){_vm.dialogVisibleAddUser=$event}}},[_c('el-form',{ref:\"FormRef\",attrs:{\"model\":_vm.Form,\"rules\":_vm.FormRules,\"label-width\":\"100px\"}},[_c('el-form-item',{attrs:{\"label\":\"用户名\",\"prop\":\"username\"}},[_c('el-input',{attrs:{\"type\":\"text\",\"minlength\":\"2\",\"maxlength\":\"12\"},model:{value:(_vm.Form.username),callback:function ($$v) {_vm.$set(_vm.Form, \"username\", (typeof $$v === 'string'? $$v.trim(): $$v))},expression:\"Form.username\"}})],1),_c('el-form-item',{attrs:{\"label\":\"密码\",\"prop\":\"password\"}},[_c('el-input',{attrs:{\"type\":\"password\",\"minlength\":\"6\",\"maxlength\":\"18\"},model:{value:(_vm.Form.password),callback:function ($$v) {_vm.$set(_vm.Form, \"password\", (typeof $$v === 'string'? $$v.trim(): $$v))},expression:\"Form.password\"}})],1),_c('el-form-item',{attrs:{\"label\":\"权限\",\"prop\":\"Juri\"}},[_c('el-select',{staticStyle:{\"width\":\"100%\"},attrs:{\"placeholder\":\"请选择\"},model:{value:(_vm.Form.Juri),callback:function ($$v) {_vm.$set(_vm.Form, \"Juri\", $$v)},expression:\"Form.Juri\"}},_vm._l((_vm.options),function(item){return _c('el-option',{key:item.id,attrs:{\"label\":item.name,\"value\":item.label}})}),1)],1)],1),_c('span',{staticClass:\"dialog-footer\",attrs:{\"slot\":\"footer\"},slot:\"footer\"},[_c('el-button',{on:{\"click\":_vm.DialogCancel}},[_vm._v(\"取 消\")]),_c('el-button',{attrs:{\"type\":\"primary\"},on:{\"click\":_vm.DialogAddUserName}},[_vm._v(\"确 定\")])],1)],1),_c('el-dialog',{attrs:{\"title\":\"用户信息编辑\",\"visible\":_vm.EditDialog,\"width\":\"45%\"},on:{\"update:visible\":function($event){_vm.EditDialog=$event}}},[_c('el-form',{ref:\"EditFormRef\",attrs:{\"model\":_vm.EditForm,\"rules\":_vm.FormRules,\"label-width\":\"100px\"}},[_c('el-form-item',{attrs:{\"label\":\"用户名\",\"prop\":\"username\"}},[_c('el-input',{model:{value:(_vm.EditForm.username),callback:function ($$v) {_vm.$set(_vm.EditForm, \"username\", $$v)},expression:\"EditForm.username\"}})],1),(_vm.UserActive)?_c('el-form-item',{attrs:{\"label\":\"权限\",\"prop\":\"Juri\"}},[_c('el-select',{staticStyle:{\"width\":\"100%\"},attrs:{\"placeholder\":\"请选择\"},model:{value:(_vm.EditForm.Juri),callback:function ($$v) {_vm.$set(_vm.EditForm, \"Juri\", $$v)},expression:\"EditForm.Juri\"}},_vm._l((_vm.options),function(item){return _c('el-option',{key:item.id,attrs:{\"label\":item.name,\"value\":item.label}})}),1)],1):_vm._e()],1),_c('span',{staticClass:\"dialog-footer\",attrs:{\"slot\":\"footer\"},slot:\"footer\"},[_c('el-button',{on:{\"click\":function($event){_vm.EditDialog = false}}},[_vm._v(\"取 消\")]),_c('el-button',{attrs:{\"type\":\"primary\"},on:{\"click\":_vm.AddEditDialog}},[_vm._v(\"确 定\")])],1)],1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n  <div class=\"container\">\r\n    <!-- 卡片 -->\r\n    <el-card>\r\n      <!-- 面包屑 -->\r\n      <el-breadcrumb separator=\"/\">\r\n        <el-breadcrumb-item :to=\"{ path: '/home' }\">首页</el-breadcrumb-item>\r\n        <el-breadcrumb-item>用户管理</el-breadcrumb-item>\r\n        <el-breadcrumb-item>用户列表</el-breadcrumb-item>\r\n      </el-breadcrumb>\r\n      <!-- 搜索和用户添加 -->\r\n      <el-row :gutter=\"20\" style=\"margin-top: 15px\" v-if=\"UserActive\">\r\n        <el-col :span=\"8\">\r\n          <el-input\r\n            placeholder=\"请输入用户名\"\r\n            v-model=\"SerachText\"\r\n            class=\"input-with-select\"\r\n            clearable\r\n            @clear=\"Clear\"\r\n          >\r\n            <el-button\r\n              slot=\"append\"\r\n              icon=\"el-icon-search\"\r\n              @click=\"Serach_User\"\r\n            ></el-button>\r\n          </el-input>\r\n        </el-col>\r\n        <el-col :span=\"5\">\r\n          <el-button type=\"primary\" v-if=\"UserActive\" @click=\"DialogActive\"\r\n            >添加用户</el-button\r\n          >\r\n        </el-col>\r\n      </el-row>\r\n      <!-- 表格信息展示 -->\r\n      <el-table :data=\"Userlist\" border stripe>\r\n        <el-table-column label=\"用户名\" prop=\"username\"></el-table-column>\r\n        <el-table-column label=\"权限\">\r\n          <template slot-scope=\"scope\">\r\n            <el-tag type=\"danger\" v-if=\"scope.row.Juri == 'admin'\"\r\n              >管理员</el-tag\r\n            >\r\n            <el-tag type=\"success\" v-else>普通用户</el-tag>\r\n          </template>\r\n        </el-table-column>\r\n        <el-table-column label=\"状态\">\r\n          <template slot-scope=\"scope\">\r\n            <el-switch\r\n              :disabled=\"UserActive ? false : true\"\r\n              v-model=\"scope.row.status\"\r\n              active-color=\"#13ce66\"\r\n              inactive-color=\"#ff4949\"\r\n              @change=\"onChange(scope.row)\"\r\n            >\r\n            </el-switch>\r\n          </template>\r\n        </el-table-column>\r\n        <el-table-column label=\"操作\">\r\n          <template slot-scope=\"scope\">\r\n            <el-button size=\"mini\" type=\"primary\" @click=\"UserEdit(scope.row)\"\r\n              >编辑</el-button\r\n            >\r\n            <el-button\r\n              size=\"mini\"\r\n              type=\"danger\"\r\n              v-if=\"UserActive\"\r\n              @click=\"Remove(scope.row._id)\"\r\n              >删除</el-button\r\n            >\r\n          </template>\r\n        </el-table-column>\r\n      </el-table>\r\n      <el-pagination\r\n        @size-change=\"handleSizeChange\"\r\n        @current-change=\"handleCurrentChange\"\r\n        :current-page=\"query.pagenum\"\r\n        :page-sizes=\"[5, 10, 15, 20]\"\r\n        :page-size=\"query.pagesize\"\r\n        layout=\"total, sizes, prev, pager, next, jumper\"\r\n        :total=\"total\"\r\n        v-if=\"UserActive\"\r\n      >\r\n      </el-pagination>\r\n    </el-card>\r\n    <!-- 添加用户对话框 -->\r\n    <el-dialog\r\n      title=\"添加用户\"\r\n      :visible.sync=\"dialogVisibleAddUser\"\r\n      width=\"45%\"\r\n    >\r\n      <!-- 添加表单 -->\r\n      <el-form\r\n        :model=\"Form\"\r\n        ref=\"FormRef\"\r\n        :rules=\"FormRules\"\r\n        label-width=\"100px\"\r\n      >\r\n        <el-form-item label=\"用户名\" prop=\"username\">\r\n          <el-input\r\n            type=\"text\"\r\n            v-model.trim=\"Form.username\"\r\n            minlength=\"2\"\r\n            maxlength=\"12\"\r\n          ></el-input>\r\n        </el-form-item>\r\n        <el-form-item label=\"密码\" prop=\"password\">\r\n          <el-input\r\n            type=\"password\"\r\n            v-model.trim=\"Form.password\"\r\n            minlength=\"6\"\r\n            maxlength=\"18\"\r\n          ></el-input>\r\n        </el-form-item>\r\n        <el-form-item label=\"权限\" prop=\"Juri\">\r\n          <el-select\r\n            v-model=\"Form.Juri\"\r\n            placeholder=\"请选择\"\r\n            style=\"width: 100%\"\r\n          >\r\n            <el-option\r\n              v-for=\"item in options\"\r\n              :key=\"item.id\"\r\n              :label=\"item.name\"\r\n              :value=\"item.label\"\r\n            >\r\n            </el-option>\r\n          </el-select>\r\n        </el-form-item>\r\n      </el-form>\r\n      <span slot=\"footer\" class=\"dialog-footer\">\r\n        <el-button @click=\"DialogCancel\">取 消</el-button>\r\n        <el-button type=\"primary\" @click=\"DialogAddUserName\">确 定</el-button>\r\n      </span>\r\n    </el-dialog>\r\n    <!-- 用户信息编辑 -->\r\n    <el-dialog title=\"用户信息编辑\" :visible.sync=\"EditDialog\" width=\"45%\">\r\n      <el-form\r\n        :model=\"EditForm\"\r\n        ref=\"EditFormRef\"\r\n        :rules=\"FormRules\"\r\n        label-width=\"100px\"\r\n      >\r\n        <el-form-item label=\"用户名\" prop=\"username\">\r\n          <el-input v-model=\"EditForm.username\"></el-input>\r\n        </el-form-item>\r\n        <el-form-item label=\"权限\" v-if=\"UserActive\" prop=\"Juri\">\r\n          <el-select\r\n            v-model=\"EditForm.Juri\"\r\n            placeholder=\"请选择\"\r\n            style=\"width: 100%\"\r\n          >\r\n            <el-option\r\n              v-for=\"item in options\"\r\n              :key=\"item.id\"\r\n              :label=\"item.name\"\r\n              :value=\"item.label\"\r\n            >\r\n            </el-option>\r\n          </el-select>\r\n        </el-form-item>\r\n      </el-form>\r\n      <span slot=\"footer\" class=\"dialog-footer\">\r\n        <el-button @click=\"EditDialog = false\">取 消</el-button>\r\n        <el-button type=\"primary\" @click=\"AddEditDialog\">确 定</el-button>\r\n      </span>\r\n    </el-dialog>\r\n  </div>\r\n</template>\r\n<script>\r\nexport default {\r\n  name: 'User',\r\n  data() {\r\n    return {\r\n      // 用户分页参数\r\n      query: {\r\n        pagesize: 10,\r\n        pagenum: 1,\r\n      },\r\n      // 用户列表数据\r\n      Userlist: [],\r\n      total: 0,\r\n      //搜索框内容\r\n      SerachText: '',\r\n      UserActive: null,\r\n      //   控制添加用户对话框\r\n      dialogVisibleAddUser: false,\r\n      //   控制编辑用户信息对话框显示和隐藏\r\n      EditDialog: false,\r\n      //   权限分类\r\n      options: [\r\n        {\r\n          label: 'admin',\r\n          name: '管理员',\r\n          id: 9,\r\n        },\r\n        {\r\n          label: 'ordinary',\r\n          name: '普通用户',\r\n          id: 10,\r\n        },\r\n      ],\r\n      //   用户表单数据\r\n      Form: {\r\n        username: '',\r\n        password: '',\r\n        Juri: '',\r\n      },\r\n      //   表单验证\r\n      FormRules: {\r\n        username: [\r\n          {\r\n            required: true,\r\n            message: '请输入用户名',\r\n            trigger: 'blur',\r\n          },\r\n          {\r\n            min: 2,\r\n            max: 12,\r\n            message: '长度在2~12个字符之间',\r\n            trigger: 'blur',\r\n          },\r\n        ],\r\n        password: [\r\n          {\r\n            required: true,\r\n            message: '请输入用户密码',\r\n            trigger: 'blur',\r\n          },\r\n          {\r\n            min: 6,\r\n            max: 18,\r\n            message: '长度在6~18个字符之间',\r\n            trigger: 'blur',\r\n          },\r\n        ],\r\n        Juri: [\r\n          {\r\n            required: true,\r\n            message: '请选择权限分配',\r\n            trigger: 'blur',\r\n          },\r\n        ],\r\n      },\r\n      //   获取修改用户的信息\r\n      EditForm: [],\r\n    }\r\n  },\r\n  created() {\r\n    this.GetUsetlist()\r\n    JSON.parse(this.Storage.Session.get('data')).Juri != 'admin'\r\n      ? (this.UserActive = false)\r\n      : (this.UserActive = true)\r\n  },\r\n  methods: {\r\n    // 获取用户列表数据\r\n    GetUsetlist() {\r\n      this.$http\r\n        .get(this.$api.API_SERVER_USER, { params: this.query })\r\n        .then((res) => {\r\n          if (res.data.status != 200) {\r\n            return this.$message.error(res.data.msg)\r\n          }\r\n          this.total = res.data.total\r\n          this.Userlist = res.data.data\r\n        })\r\n    },\r\n    // 控制用户的登录状态\r\n    onChange(val) {\r\n      var params = {\r\n        id: val._id,\r\n        status: val.status,\r\n      }\r\n      this.$http.put(this.$api.API_SERVER_MODIFY_USER, params).then((res) => {\r\n        if (res.data.status != 200) {\r\n          return this.$message.error(res.data.msg)\r\n        }\r\n        this.$message.success(res.data.msg)\r\n        this.GetUsetlist()\r\n      })\r\n    },\r\n    // 打开添加用户对话框\r\n    DialogActive() {\r\n      console.log(123)\r\n      this.dialogVisibleAddUser = true\r\n    },\r\n    // 关闭添加用户对话框并且重置对话框内容信息\r\n    DialogCancel() {\r\n      this.dialogVisibleAddUser = false\r\n      this.$refs.FormRef.resetFields()\r\n    },\r\n    // 实现用户添加\r\n    DialogAddUserName() {\r\n      this.$refs.FormRef.validate((valid) => {\r\n        if (!valid) {\r\n          return this.$message.error('请填写完整用户信息')\r\n        }\r\n        this.$http\r\n          .post(this.$api.API_SERVER_ADD_USER, this.Form)\r\n          .then((res) => {\r\n            if (res.data.status != 201) {\r\n              return this.$message.error(res.data.msg)\r\n            }\r\n            this.$message.success(res.data.msg)\r\n            this.$refs.FormRef.resetFields()\r\n            this.dialogVisibleAddUser = false\r\n            this.GetUsetlist()\r\n          })\r\n      })\r\n    },\r\n    // 用户信息搜索\r\n    Serach_User() {\r\n      this.$http\r\n        .get(this.$api.API_SERVER_SERACH_USER, {\r\n          params: { Text: this.SerachText },\r\n        })\r\n        .then((res) => {\r\n          if (res.data.status != 200) {\r\n            return this.$message.error(res.data.msg)\r\n          }\r\n          this.Userlist = res.data.data\r\n          if (this.Userlist.length == 0)\r\n            return this.$message.info('没有查询到当前用户')\r\n        })\r\n    },\r\n    // 清除搜索输入框的时候重新获取用户数据\r\n    Clear() {\r\n      this.GetUsetlist()\r\n    },\r\n    // 删除用户信息\r\n    Remove(id) {\r\n      this.$confirm('此操作将永久删除该用户, 是否继续?', '提示', {\r\n        confirmButtonText: '确定',\r\n        cancelButtonText: '取消',\r\n        type: 'warning',\r\n      })\r\n        .then(() => {\r\n          this.$http\r\n            .delete(this.$api.API_SERVER_REMOVER_USER + id)\r\n            .then((res) => {\r\n              if (res.data.status != 200) {\r\n                return this.$message.error(res.data.msg)\r\n              }\r\n              this.$message.success(res.data.msg)\r\n              this.GetUsetlist()\r\n            })\r\n        })\r\n        .catch(() => {\r\n          this.$message({\r\n            type: 'info',\r\n            message: '已取消删除',\r\n          })\r\n        })\r\n    },\r\n    // 编辑用户信息\r\n    UserEdit(val) {\r\n      this.EditDialog = true\r\n      var data = this.Userlist.filter((item) => {\r\n        return item._id == val._id\r\n      })\r\n      this.EditForm = data[0]\r\n    },\r\n    // 提交编辑的用户信息\r\n    AddEditDialog() {\r\n      this.$refs.EditFormRef.validate((valid) => {\r\n        if (!valid) {\r\n          return this.$message.error('请填写修改内容')\r\n        }\r\n        var params = {\r\n          username: this.EditForm.username,\r\n          Juri: this.EditForm.Juri,\r\n          id: this.EditForm._id,\r\n        }\r\n        this.$http.put(this.$api.API_SERVER_EDIT_USER, params).then((res) => {\r\n          if (res.data.status != 200) {\r\n            return this.$message.error(res.data.msg)\r\n          }\r\n          this.$message.success(res.data.msg)\r\n          this.EditDialog = false\r\n          this.GetUsetlist()\r\n        })\r\n      })\r\n    },\r\n    // 控制每一个分页显示多少条数据\r\n    handleSizeChange(Size) {\r\n      this.query.pagesize = Size\r\n      this.GetUsetlist()\r\n    },\r\n    // 控制页码值\r\n    handleCurrentChange(Num) {\r\n      this.query.pagenum = Num\r\n      this.GetUsetlist()\r\n    },\r\n  },\r\n}\r\n</script>\r\n<style lang=\"less\" scoped>\r\n</style>","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./user.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./user.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./user.vue?vue&type=template&id=c73d73bc&scoped=true&\"\nimport script from \"./user.vue?vue&type=script&lang=js&\"\nexport * from \"./user.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"c73d73bc\",\n  null\n  \n)\n\nexport default component.exports"],"sourceRoot":""}