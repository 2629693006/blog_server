(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-57d34ef5"],{"10f4":function(e,t,r){var a=r("24fb");t=a(!1),t.push([e.i,".viewImg[data-v-3586b487]{width:100%;height:60%}",""]),e.exports=t},"28fe":function(e,t,r){"use strict";r("6f90")},"6f90":function(e,t,r){var a=r("10f4");"string"===typeof a&&(a=[[e.i,a,""]]),a.locals&&(e.exports=a.locals);var i=r("499e").default;i("32481bfc",a,!0,{sourceMap:!1,shadowMode:!1})},a434:function(e,t,r){"use strict";var a=r("23e7"),i=r("23cb"),l=r("a691"),o=r("50c4"),s=r("7b0b"),n=r("65f0"),c=r("8418"),d=r("1dde"),m=r("ae40"),u=d("splice"),p=m("splice",{ACCESSORS:!0,0:0,1:2}),f=Math.max,h=Math.min,g=9007199254740991,_="Maximum allowed length exceeded";a({target:"Array",proto:!0,forced:!u||!p},{splice:function(e,t){var r,a,d,m,u,p,b=s(this),v=o(b.length),w=i(e,v),F=arguments.length;if(0===F?r=a=0:1===F?(r=0,a=v-w):(r=F-2,a=h(f(l(t),0),v-w)),v+r-a>g)throw TypeError(_);for(d=n(b,a),m=0;m<a;m++)u=w+m,u in b&&c(d,m,b[u]);if(d.length=a,r<a){for(m=w;m<v-a;m++)u=m+a,p=m+r,u in b?b[p]=b[u]:delete b[p];for(m=v;m>v-a+r;m--)delete b[m-1]}else if(r>a)for(m=v-a;m>w;m--)u=m+a-1,p=m+r-1,u in b?b[p]=b[u]:delete b[p];for(m=0;m<r;m++)b[m+w]=arguments[m+2];return b.length=v-a+r,d}})},c740:function(e,t,r){"use strict";var a=r("23e7"),i=r("b727").findIndex,l=r("44d2"),o=r("ae40"),s="findIndex",n=!0,c=o(s);s in[]&&Array(1)[s]((function(){n=!1})),a({target:"Array",proto:!0,forced:n||!c},{findIndex:function(e){return i(this,e,arguments.length>1?arguments[1]:void 0)}}),l(s)},f20c:function(e,t,r){"use strict";r.r(t);var a=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"container"},[r("el-card",[r("el-breadcrumb",{attrs:{separator:"/"}},[r("el-breadcrumb-item",{attrs:{to:{path:"/home"}}},[e._v("首页")]),r("el-breadcrumb-item",{attrs:{to:{path:"/article"}}},[e._v("文章管理")]),r("el-breadcrumb-item",[e._v("添加文章")])],1),r("el-tabs",{staticStyle:{"min-height":"200px","margin-top":"15px"},attrs:{"tab-position":"top"}},[r("el-tab-pane",{attrs:{label:"文章标题"}},[r("el-form",{ref:"FormRef",attrs:{model:e.Form,rules:e.FormRules,"label-position":"top"}},[r("el-form-item",{attrs:{label:"标题",prop:"article_Title"}},[r("el-input",{attrs:{maxlength:"50","show-word-limit":""},model:{value:e.Form.article_Title,callback:function(t){e.$set(e.Form,"article_Title","string"===typeof t?t.trim():t)},expression:"Form.article_Title"}})],1),r("el-form-item",{attrs:{label:"描述",prop:"article_describe"}},[r("el-input",{attrs:{type:"textarea",maxlength:"100","show-word-limit":""},model:{value:e.Form.article_describe,callback:function(t){e.$set(e.Form,"article_describe","string"===typeof t?t.trim():t)},expression:"Form.article_describe"}})],1),r("el-form-item",{attrs:{label:"分类",prop:"article_pId"}},[r("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"请选择分类"},model:{value:e.Form.article_pId,callback:function(t){e.$set(e.Form,"article_pId",t)},expression:"Form.article_pId"}},e._l(e.TypeList,(function(e,t){return r("el-option",{key:t,attrs:{label:e.name,value:e._id}})})),1)],1),r("el-form-item",{attrs:{label:"作者",prop:"article_User"}},[r("el-input",{attrs:{disabled:""},model:{value:e.Form.article_User.username,callback:function(t){e.$set(e.Form.article_User,"username","string"===typeof t?t.trim():t)},expression:"Form.article_User.username"}})],1),r("el-form-item",{attrs:{label:"封面"}},[r("el-upload",{staticClass:"upload-demo",attrs:{action:e.ActiveUrl,"on-preview":e.handlePreview,"on-remove":e.handleRemove,"on-success":e.handSuccess,"list-type":"picture",headers:e.HeaderTokem}},[r("el-button",{attrs:{size:"small",type:"primary"}},[e._v("点击上传")])],1)],1)],1)],1),r("el-tab-pane",{attrs:{label:"文章内容"}},[r("mavon-editor",{ref:"md",staticStyle:{"min-height":"500px"},on:{imgAdd:e.article_AddCover,change:e.change},model:{value:e.content,callback:function(t){e.content=t},expression:"content"}}),r("el-row",{staticStyle:{"margin-top":"15px"}},[r("el-col",[r("el-button",{staticStyle:{float:"right"},attrs:{type:"primary"},on:{click:e.Release_Article}},[e._v("发布文章")])],1)],1)],1)],1)],1),r("el-dialog",{attrs:{title:"预览图",visible:e.CoverDialog,width:"30%"},on:{"update:visible":function(t){e.CoverDialog=t}}},[r("img",{staticClass:"viewImg",attrs:{src:e.ViewURL,alt:"error"}}),r("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[r("el-button",{on:{click:function(t){e.CoverDialog=!1}}},[e._v("取 消")]),r("el-button",{attrs:{type:"primary"},on:{click:function(t){e.CoverDialog=!1}}},[e._v("确 定")])],1)])],1)},i=[],l=(r("c740"),r("a434"),{name:"Addarticle",data:function(){return{toolbars:{bold:!0,italic:!0,header:!0,underline:!0,strikethrough:!0,mark:!0,superscript:!0,subscript:!0,quote:!0,ol:!0,ul:!0,link:!0,imagelink:!0,code:!0,table:!0,fullscreen:!0,readmodel:!0,htmlcode:!0,help:!0,undo:!0,redo:!0,trash:!0,save:!0,navigation:!0,alignleft:!0,aligncenter:!0,alignright:!0,subfield:!0,preview:!0},Form:{article_Title:"",article_describe:"",article_pId:"",article_User:{},article_content:"",article_cover:""},content:"",FormRules:{article_Title:[{required:!0,message:"请输入标题",trigger:"blur"},{maxlength:100,message:"长度不能超过50个字符",trigger:"blur"}],article_describe:[{required:!0,message:"请输入描述",trigger:"blur"},{maxlength:100,message:"长度不能超过100个字符",trigger:"blur"}],article_pId:[{required:!0,message:"请选择分类",trigger:"blur"}],article_User:[{required:!0,message:"请输入作者名称",trigger:"blur"}]},TypeList:[],ActiveUrl:this.$api.API_SERVER_ARTICLE_FORMIDABLE_UPLOAD,HeaderTokem:{Authorization:this.Storage.Session.get("token")},CoverDialog:!1,ViewURL:""}},created:function(){this.Form.article_User=JSON.parse(this.Storage.Session.get("data")),this.TypeList=JSON.parse(this.Storage.Session.get("Type"))},methods:{handSuccess:function(e){this.Form.article_cover=e.data.temp_url,this.$message.success("上传成功")},handlePreview:function(e){this.CoverDialog=!0,this.ViewURL=this.$api.API_SERVER+e.response.data.view_url},handleRemove:function(e){var t=e.response.data.view_url,r=this.Form.article_cover.findIndex((function(e){return e.PIC==t}));this.Form.article_cover.splice(1,r)},article_AddCover:function(e,t){var r=this,a=new FormData;a.append("file",t),this.$http({url:this.$api.API_SERVER_ARTICLE_UPLOAD,method:"post",data:a,headers:{"Content-Type":"multipart/form-data"}}).then((function(t){r.Url=t.data.data.view_url,r.$refs.md.$img2Url(e,r.$api.API_SERVER+"/"+t.data.data.view_url)}))},change:function(e,t){this.Form.article_content=t},Release_Article:function(){var e=this;this.$refs.FormRef.validate((function(t){return t?0==e.Form.article_content.length?e.$message.error("请输入文章内容才可进行发布!"):void e.$http.post(e.$api.API_SERVER_ADD_ARTICLE,e.Form).then((function(t){if(201!=t.data.status)return e.$message.error(t.data.msg);e.$message.success(t.data.msg),e.Form={article_Title:"",article_describe:"",article_pId:"",article_User:{},article_content:"",article_cover:[]},e.$router.push("/article")})):e.$message.error("请输入内容在进行发布")}))}},mounted:function(){}}),o=l,s=(r("28fe"),r("2877")),n=Object(s["a"])(o,a,i,!1,null,"3586b487",null);t["default"]=n.exports}}]);
//# sourceMappingURL=chunk-57d34ef5.4d7d85f5.js.map