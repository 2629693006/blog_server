(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d0f1565"],{"9fce":function(e,t,r){"use strict";r.r(t);var s=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"container"},[r("el-card",[r("el-breadcrumb",{attrs:{separator:"/"}},[r("el-breadcrumb-item",{attrs:{to:{path:"/home"}}},[e._v("首页")]),r("el-breadcrumb-item",[e._v("用户管理")]),r("el-breadcrumb-item",[e._v("用户列表")])],1),e.UserActive?r("el-row",{staticStyle:{"margin-top":"15px"},attrs:{gutter:20}},[r("el-col",{attrs:{span:8}},[r("el-input",{staticClass:"input-with-select",attrs:{placeholder:"请输入用户名",clearable:""},on:{clear:e.Clear},model:{value:e.SerachText,callback:function(t){e.SerachText=t},expression:"SerachText"}},[r("el-button",{attrs:{slot:"append",icon:"el-icon-search"},on:{click:e.Serach_User},slot:"append"})],1)],1),r("el-col",{attrs:{span:5}},[e.UserActive?r("el-button",{attrs:{type:"primary"},on:{click:e.DialogActive}},[e._v("添加用户")]):e._e()],1)],1):e._e(),r("el-table",{attrs:{data:e.Userlist,border:"",stripe:""}},[r("el-table-column",{attrs:{label:"用户名",prop:"username"}}),r("el-table-column",{attrs:{label:"权限"},scopedSlots:e._u([{key:"default",fn:function(t){return["admin"==t.row.Juri?r("el-tag",{attrs:{type:"danger"}},[e._v("管理员")]):r("el-tag",{attrs:{type:"success"}},[e._v("普通用户")])]}}])}),r("el-table-column",{attrs:{label:"状态"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("el-switch",{attrs:{disabled:!e.UserActive,"active-color":"#13ce66","inactive-color":"#ff4949"},on:{change:function(r){return e.onChange(t.row)}},model:{value:t.row.status,callback:function(r){e.$set(t.row,"status",r)},expression:"scope.row.status"}})]}}])}),r("el-table-column",{attrs:{label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("el-button",{attrs:{size:"mini",type:"primary"},on:{click:function(r){return e.UserEdit(t.row)}}},[e._v("编辑")]),e.UserActive?r("el-button",{attrs:{size:"mini",type:"danger"},on:{click:function(r){return e.Remove(t.row._id)}}},[e._v("删除")]):e._e()]}}])})],1),e.UserActive?r("el-pagination",{attrs:{"current-page":e.query.pagenum,"page-sizes":[5,10,15,20],"page-size":e.query.pagesize,layout:"total, sizes, prev, pager, next, jumper",total:e.total},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}}):e._e()],1),r("el-dialog",{attrs:{title:"添加用户",visible:e.dialogVisibleAddUser,width:"45%"},on:{"update:visible":function(t){e.dialogVisibleAddUser=t}}},[r("el-form",{ref:"FormRef",attrs:{model:e.Form,rules:e.FormRules,"label-width":"100px"}},[r("el-form-item",{attrs:{label:"用户名",prop:"username"}},[r("el-input",{attrs:{type:"text",minlength:"2",maxlength:"12"},model:{value:e.Form.username,callback:function(t){e.$set(e.Form,"username","string"===typeof t?t.trim():t)},expression:"Form.username"}})],1),r("el-form-item",{attrs:{label:"密码",prop:"password"}},[r("el-input",{attrs:{type:"password",minlength:"6",maxlength:"18"},model:{value:e.Form.password,callback:function(t){e.$set(e.Form,"password","string"===typeof t?t.trim():t)},expression:"Form.password"}})],1),r("el-form-item",{attrs:{label:"权限",prop:"Juri"}},[r("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"请选择"},model:{value:e.Form.Juri,callback:function(t){e.$set(e.Form,"Juri",t)},expression:"Form.Juri"}},e._l(e.options,(function(e){return r("el-option",{key:e.id,attrs:{label:e.name,value:e.label}})})),1)],1)],1),r("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[r("el-button",{on:{click:e.DialogCancel}},[e._v("取 消")]),r("el-button",{attrs:{type:"primary"},on:{click:e.DialogAddUserName}},[e._v("确 定")])],1)],1),r("el-dialog",{attrs:{title:"用户信息编辑",visible:e.EditDialog,width:"45%"},on:{"update:visible":function(t){e.EditDialog=t}}},[r("el-form",{ref:"EditFormRef",attrs:{model:e.EditForm,rules:e.FormRules,"label-width":"100px"}},[r("el-form-item",{attrs:{label:"用户名",prop:"username"}},[r("el-input",{model:{value:e.EditForm.username,callback:function(t){e.$set(e.EditForm,"username",t)},expression:"EditForm.username"}})],1),e.UserActive?r("el-form-item",{attrs:{label:"权限",prop:"Juri"}},[r("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"请选择"},model:{value:e.EditForm.Juri,callback:function(t){e.$set(e.EditForm,"Juri",t)},expression:"EditForm.Juri"}},e._l(e.options,(function(e){return r("el-option",{key:e.id,attrs:{label:e.name,value:e.label}})})),1)],1):e._e()],1),r("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[r("el-button",{on:{click:function(t){e.EditDialog=!1}}},[e._v("取 消")]),r("el-button",{attrs:{type:"primary"},on:{click:e.AddEditDialog}},[e._v("确 定")])],1)],1)],1)},a=[],i=(r("4de4"),{name:"User",data:function(){return{query:{pagesize:10,pagenum:1},Userlist:[],total:0,SerachText:"",UserActive:null,dialogVisibleAddUser:!1,EditDialog:!1,options:[{label:"admin",name:"管理员",id:9},{label:"ordinary",name:"普通用户",id:10}],Form:{username:"",password:"",Juri:""},FormRules:{username:[{required:!0,message:"请输入用户名",trigger:"blur"},{min:2,max:12,message:"长度在2~12个字符之间",trigger:"blur"}],password:[{required:!0,message:"请输入用户密码",trigger:"blur"},{min:6,max:18,message:"长度在6~18个字符之间",trigger:"blur"}],Juri:[{required:!0,message:"请选择权限分配",trigger:"blur"}]},EditForm:[]}},created:function(){this.GetUsetlist(),"admin"!=JSON.parse(this.Storage.Session.get("data")).Juri?this.UserActive=!1:this.UserActive=!0},methods:{GetUsetlist:function(){var e=this;this.$http.get(this.$api.API_SERVER_USER,{params:this.query}).then((function(t){if(200!=t.data.status)return e.$message.error(t.data.msg);e.total=t.data.total,e.Userlist=t.data.data}))},onChange:function(e){var t=this,r={id:e._id,status:e.status};this.$http.put(this.$api.API_SERVER_MODIFY_USER,r).then((function(e){if(200!=e.data.status)return t.$message.error(e.data.msg);t.$message.success(e.data.msg),t.GetUsetlist()}))},DialogActive:function(){this.dialogVisibleAddUser=!0},DialogCancel:function(){this.dialogVisibleAddUser=!1,this.$refs.FormRef.resetFields()},DialogAddUserName:function(){var e=this;this.$refs.FormRef.validate((function(t){if(!t)return e.$message.error("请填写完整用户信息");e.$http.post(e.$api.API_SERVER_ADD_USER,e.Form).then((function(t){if(201!=t.data.status)return e.$message.error(t.data.msg);e.$message.success(t.data.msg),e.$refs.FormRef.resetFields(),e.dialogVisibleAddUser=!1,e.GetUsetlist()}))}))},Serach_User:function(){var e=this;this.$http.get(this.$api.API_SERVER_SERACH_USER,{params:{Text:this.SerachText}}).then((function(t){return 200!=t.data.status?e.$message.error(t.data.msg):(e.Userlist=t.data.data,0==e.Userlist.length?e.$message.info("没有查询到当前用户"):void 0)}))},Clear:function(){this.GetUsetlist()},Remove:function(e){var t=this;this.$confirm("此操作将永久删除该用户, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){t.$http.delete(t.$api.API_SERVER_REMOVER_USER+e).then((function(e){if(200!=e.data.status)return t.$message.error(e.data.msg);t.$message.success(e.data.msg),t.GetUsetlist()}))})).catch((function(){t.$message({type:"info",message:"已取消删除"})}))},UserEdit:function(e){this.EditDialog=!0;var t=this.Userlist.filter((function(t){return t._id==e._id}));this.EditForm=t[0]},AddEditDialog:function(){var e=this;this.$refs.EditFormRef.validate((function(t){if(!t)return e.$message.error("请填写修改内容");var r={username:e.EditForm.username,Juri:e.EditForm.Juri,id:e.EditForm._id};e.$http.put(e.$api.API_SERVER_EDIT_USER,r).then((function(t){if(200!=t.data.status)return e.$message.error(t.data.msg);e.$message.success(t.data.msg),e.EditDialog=!1,e.GetUsetlist()}))}))},handleSizeChange:function(e){this.query.pagesize=e,this.GetUsetlist()},handleCurrentChange:function(e){this.query.pagenum=e,this.GetUsetlist()}}}),o=i,l=r("2877"),n=Object(l["a"])(o,s,a,!1,null,"c73d73bc",null);t["default"]=n.exports}}]);
//# sourceMappingURL=chunk-2d0f1565.3913e378.js.map